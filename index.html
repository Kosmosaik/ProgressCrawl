<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ProgressCrawl</title>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/game.panels.css">
</head>
<body>
<div id="game-header">
  <span class="game-header-text">
    ProgressCrawl — v0.0.70g-dev : QoL Part 1 v9
  </span>
  <button id="patch-notes-btn" type="button">Patch Notes</button>
</div>

  <!-- START SCREEN -->
  <section id="screen-start">
    <div class="panel">
      <h1>ProgressCrawl</h1>
      <p>Survival Crafting RPG prototype</p>
      <button id="btn-new-game">Create New Character</button>

      <div id="save-list"></div>
    </div>
  </section>

  <!-- CHARACTER CREATION SCREEN -->
  <section id="screen-character" hidden>
    <div class="panel">
      <h2>Create Character</h2>

      <!-- Name -->
      <div class="char-row">
        <label for="char-name">Name</label>
        <input id="char-name" type="text" autocomplete="off">
        <button id="btn-reroll-name" type="button">Random Name</button>
      </div>

      <!-- Stats -->
      <div class="char-stats">
        <p>Distribute your stat points.</p>
        <div class="stat-row">
          <span class="stat-label">STR</span>
          <span id="stat-str-value">5</span>
          <button id="btn-str-plus" type="button">+</button>
          <button id="btn-str-minus" type="button">-</button>
        </div>

        <div class="stat-row">
          <span class="stat-label">DEX</span>
          <span id="stat-dex-value">5</span>
          <button id="btn-dex-plus" type="button">+</button>
          <button id="btn-dex-minus" type="button">-</button>
        </div>

        <div class="stat-row">
          <span class="stat-label">INT</span>
          <span id="stat-int-value">5</span>
          <button id="btn-int-plus" type="button">+</button>
          <button id="btn-int-minus" type="button">-</button>
        </div>

        <div class="stat-row">
          <span class="stat-label">VIT</span>
          <span id="stat-vit-value">5</span>
          <button id="btn-vit-plus" type="button">+</button>
          <button id="btn-vit-minus" type="button">-</button>
        </div>


        <p>Points left: <span id="points-left">20</span></p>
        <button id="btn-random-stats" type="button">Randomize Stats</button>
      </div>

      <div class="char-actions">
        <button id="btn-create-character" type="button">Create Character</button>
        <button id="btn-back-to-start" type="button">Back</button>
      </div>
    </div>
  </section>

  <!-- MAIN GAME SCREEN -->
  <section id="screen-game" hidden>
    <!-- Character summary -->
    <div id="character-summary">
      <span id="char-summary-name"></span>
      <span id="char-summary-stats"></span>
    </div>

    <div id="menu-bar">
      <button id="inventory-btn" style="display:none;">Inventory</button>
      <button id="equipment-btn" style="display:none;">Equipment</button>
      <button id="skills-btn" class="menu-btn">Skills</button>
    </div>

    <div id="zone-panel" class="panel">
      <h2 class="draggable-handle">Zone</h2>
    
      <div id="zone-layout">
        
        <!-- LEFT MAIN COLUMN -->
        <div id="zone-main-column">
    
          <!-- Zone Info -->
          <div class="zone-section">
            <div class="zone-section-title">Zone Info</div>
            <div id="zone-info">
              <div id="zone-name">Zone: (none)</div>
              <div id="zone-status">Status: Not in a zone</div>
              <div id="zone-exploration-stats">Explored: 0% (0 / 0 tiles)</div>
            </div>
          </div>
    
          <!-- Controls -->
          <div class="zone-section">
            <div class="zone-section-title">Controls</div>
            <div id="zone-actions">
              <button id="zone-explore-next" type="button">Explore Next Tile</button>
              <button id="zone-explore-auto" type="button">Explore Auto</button>
              <button id="zone-explore-stop" type="button">Stop Exploring</button>
            </div>
          </div>
    
          <!-- Map -->
          <div class="zone-section">
            <div class="zone-section-title">Map</div>
            <div id="zone-grid-container">
              <pre id="zone-grid-view" class="zone-grid-view">(No active zone)</pre>
            </div>
          </div>
          
          <!-- Finish Zone -->
          <div class="zone-section" id="zone-finish-menu" style="display:none;">
            <div class="zone-section-title">Zone Completed</div>
            <button id="zone-finish-stay" type="button">STAY</button>
            <button id="zone-finish-leave" type="button">LEAVE ZONE</button>
          </div>
          
          <!-- Messages -->
          <div class="zone-section">
            <div class="zone-section-title">Messages</div>
            <div id="zone-messages-log">
              <ul id="zone-messages-list"></ul>
            </div>
          </div>
    
        </div>
    
        <!-- RIGHT DISCOVERIES SIDEBAR -->
        <div id="zone-discoveries-column">
          <div class="zone-section-title">Discoveries</div>
        
          <!-- Inventory-style sort bar -->
          <div id="zone-discoveries-sort-bar" class="inventory-sort-bar">
            <span>Sort by:</span>
            <button type="button" class="sort-btn" data-key="distance">Distance</button>
            <button type="button" class="sort-btn" data-key="name">Name</button>
            <button type="button" class="sort-btn" data-key="type">Type</button>
          </div>
        
          <ul id="zone-discoveries-list"></ul>
        </div>

      </div>
    </div>

    <div id="worldmap-panel" class="panel" style="display:none;">
      <h2 class="draggable-handle">World Map</h2>

      <div class="zone-section">
        <div class="zone-section-title">Overview</div>
        <div id="worldmap-status">World map not initialized.</div>
      </div>

      <div class="zone-section">
        <div class="zone-section-title">Map</div>
        <div id="worldmap-grid-container">
          <pre id="worldmap-grid-view" class="zone-grid-view">(No world map)</pre>
        </div>
      </div>
      <div id="worldmap-tile-info" class="worldmap-tile-info hidden">
        <h3>Zone Info</h3>
        <div id="worldmap-tile-info-content"></div>
        <button id="worldmap-enter-zone-button">Enter Zone</button>
      </div>
    </div>

    <button id="loot-button">Loot!</button>

    <!-- Phase 9 — Content interaction modal (Harvest/Kill/Inspect/Enter) -->
    <div id="modal-overlay" class="modal-overlay hidden" role="dialog" aria-modal="true">
      <div id="modal-panel" class="panel modal-panel">
        <h2 id="modal-title">...</h2>
        <div id="modal-body" class="modal-body"></div>
        <div class="modal-actions">
          <button id="modal-primary" type="button">OK</button>
          <button id="modal-secondary" type="button">Cancel</button>
        </div>
      </div>
    </div>
    <div id="progress-container">
      <div id="progress"></div>
    </div>

    <div id="hp-bar-container">
      <div id="hp-bar-label">HP</div>
      <div id="hp-bar">
        <div id="hp-bar-fill"></div>
      </div>
    </div>

    <div id="inventory-panel">
      <h3 class="draggable-handle">Inventory</h3>
    
      <!-- Inventory toolbar: view toggle + collapse/expand all -->
      <div class="inventory-toolbar">
        <button id="inventory-view-toggle" type="button">
          View: Category ▼
        </button>
    
        <button id="inventory-collapse-all" type="button" title="Collapse all categories">
          Collapse all
        </button>
    
        <button id="inventory-expand-all" type="button" title="Expand all categories">
          Expand all
        </button>
      </div>
    
      <div id="inventory-list"></div>
    </div>
    
    <div id="equipment-panel">
      <h3 class="draggable-handle">Equipment</h3>
    
      <div id="equipment-slots"></div>
      <div id="equipment-summary"></div>
    </div>

    <div id="skills-panel" class="panel" style="display:none">
      <h2 class="draggable-handle">Skills</h2>
      <div id="skills-list"></div>
    </div>
  </section>

  <!-- Patch Notes Modal -->
<div id="patch-notes-panel" hidden>
  <div class="patch-notes-backdrop">
    <div class="patch-notes-dialog">
      <h3 id="patch-notes-title">Patch Notes</h3>
      <pre id="patch-notes-content">Loading patch notes…</pre>
      <button id="patch-notes-close" type="button">Close</button>
    </div>
  </div>
</div>
<script src="scripts/config.js"></script>

<!-- Core -->
<script src="scripts/core/pc.core.js"></script>
<script src="scripts/core/pc.api.js"></script>

<!-- Data / globals used by loot, inventory, equipment -->
<script src="scripts/items.js"></script>
<script src="scripts/quality.js"></script>

<!-- UI helpers -->
<script src="scripts/ui.js"></script>
<script src="scripts/ui/ui.tooltip.js"></script>
<script src="scripts/ui/ui.draggablePanels.js"></script>

<!-- Character (createDefaultSkills + derived/computed stats) -->
<script src="scripts/character/character.core.js"></script>
<script src="scripts/character/character.derived.js"></script>
<script src="scripts/character/character.skills.js"></script>
<script src="scripts/character/character.compute.js"></script>
<script src="scripts/character.js"></script>

<!-- Zones + Worldmap -->
<script src="scripts/zones/zones.ids.js"></script>
<script src="scripts/zones/zones.data.js"></script>
<script src="scripts/zones/zones.generator.js"></script>

<!-- 0.0.70e — Content (defs + tables + deterministic placement helpers)
     Must load before zones.core.js (initializeZoneContent hook). -->
<script src="scripts/content/content.defs.js"></script>
<script src="scripts/content/content.lootTables.js"></script>
<script src="scripts/content/content.spawnTables.js"></script>
<script src="scripts/content/content.rng.js"></script>
<script src="scripts/content/content.place.js"></script>
<script src="scripts/content/content.populate.js"></script>
<script src="scripts/content/content.deltas.js"></script>
<script src="scripts/content/content.interact.js"></script>

<script src="scripts/worldmap/worldmap.slots.js"></script>
<script src="scripts/worldmap/worldmap.core.js"></script>
<script src="scripts/worldmap/worldmap.ui.js"></script>

<script src="scripts/zones/zones.core.js"></script>

<!-- game.js defines core game globals/state helpers used by many modules -->
<script src="scripts/game.js"></script>

<script src="scripts/zones/zones.movement.js"></script>
<script src="scripts/zones/zones.exploration.js"></script>
<script src="scripts/zones/zones.ui.js"></script>

<!-- Inventory (required by new game + save/load + inventory UI) -->
<script src="scripts/inventory/inventory.state.js"></script>
<script src="scripts/inventory/inventory.data.js"></script>
<script src="scripts/inventory/inventory.sort.js"></script>
<script src="scripts/inventory/inventory.render.category.js"></script>
<script src="scripts/inventory/inventory.persistence.js"></script>
<script src="scripts/inventory/inventory.core.js"></script>
<script src="scripts/inventory.js"></script>

<!-- Equipment (required by new game + save/load + equipment UI) -->
<script src="scripts/equipment/equipment.core.js"></script>
<script src="scripts/equipment/equipment.tooltip.js"></script>
<script src="scripts/equipment.js"></script>

<!-- Game modules -->
<script src="scripts/game/game.loot.js"></script>
    <script src="scripts/game/game.save.js"></script>
    <script src="scripts/game/game.ui.modal.js"></script>
<script src="scripts/game/game.patchnotes.js"></script>
<script src="scripts/game/game.screens.js"></script>
<script src="scripts/game/game.ui.panels.js"></script>
<script src="scripts/game/game.creation.js"></script>

<!-- Entry point (must be last) -->
<script src="scripts/bootstrap.js"></script>

</body>
</html>
